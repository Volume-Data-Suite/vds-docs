<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>File Format: RAW 3D - Volume Data Suite Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="supported_plattforms.html"><strong aria-hidden="true">2.</strong> Supported Plattforms</a></li><li class="chapter-item expanded "><a href="about_volume_data.html"><strong aria-hidden="true">3.</strong> About Volume Data</a></li><li class="chapter-item expanded "><a href="importing_static_volume_data.html"><strong aria-hidden="true">4.</strong> Importing Static Volume Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="file_format_raw_3d.html" class="active"><strong aria-hidden="true">4.1.</strong> File Format: RAW 3D</a></li></ol></li><li class="chapter-item expanded "><a href="visualization.html"><strong aria-hidden="true">5.</strong> Visualization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="render_backend.html"><strong aria-hidden="true">5.1.</strong> Render Backend</a></li></ol></li><li class="chapter-item expanded "><a href="development.html"><strong aria-hidden="true">6.</strong> Development</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Volume Data Suite Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="file-format-raw-3d"><a class="header" href="#file-format-raw-3d">File Format: RAW 3D</a></h1>
<p>RAW 3D files are just plain 3D arrays of voxel value data. These files do not contain a header with metadata on how to read or interpret the data. While VDS has a well defined <a href="/about_volume_data.html#volume-data-representation-in-vds">Volume Data Representation</a>, there is no universal applicable standard for memory layout, number type, voxel order, endianess and so on when storing volume data. Therefore, you need to provide the nessesary metadata on how to read and interpret the data when importing a RAW 3D file.</p>
<h2 id="typical-file-extensions"><a class="header" href="#typical-file-extensions">Typical file extensions:</a></h2>
<ul>
<li>*.raw</li>
<li>*.RAW</li>
</ul>
<h2 id="supported-number-types-for-voxels"><a class="header" href="#supported-number-types-for-voxels">Supported Number Types for Voxels</a></h2>
<p>Each voxel value can be stored as a signed integer, an unsigned integer or as a floating point number. Each of these number types can be stored with various amounts of bits per number, which is known as <em>&quot;precision&quot;</em>. A higher precision usually means more details in the image data at the cost of larger file sizes. The following number types are supported by VDS when importing a RAW 3D file:</p>
<div class="table-wrapper"><table><thead><tr><th>ID</th><th>Number Type</th><th>Precision</th></tr></thead><tbody>
<tr><td>u8</td><td>Unsigned Integer</td><td>8 Bit</td></tr>
<tr><td>u16</td><td>Unsigned Integer</td><td>16 Bit</td></tr>
<tr><td>i8</td><td>Signed Integer</td><td>8 Bit</td></tr>
<tr><td>i16</td><td>Signed Integer</td><td>16 Bit</td></tr>
<tr><td>f16</td><td>Floating Point Number</td><td>16 Bit</td></tr>
</tbody></table>
</div>
<blockquote>
<p>Internally, VDS always converts voxel values to f16 before beeing operated on.</p>
</blockquote>
<h2 id="scaling"><a class="header" href="#scaling">Scaling</a></h2>
<p>VDS supports uniform and non-uniform spacing with different scaling factors for each axis. Non-linear scaling is not supported.</p>
<h2 id="voxel-ordering"><a class="header" href="#voxel-ordering">Voxel Ordering</a></h2>
<p>Some file formats like RAW 3D do not store metadata about the coordinate system. It could be possible, that for example the RAW 3D files content was stored in RAS but the VDS viewer is configured to use LAS.</p>
<p><strong>Storage Orders</strong> desribe the voxel ordering. </p>
<p>Here is an example for the Storage Order for <strong>LAS</strong> which would be <em>&quot;R-&gt;L within P-&gt;A within I-&gt;S&quot;</em> and means:</p>
<ol>
<li>Voxels ordered from right to left to store a row</li>
<li>Rows ordered from posterior to anterior to store a slice</li>
<li>Slices stored from inferior to superior to store a volume</li>
</ol>
<p>By selecting the correct Storage Order, the axis of the file data coordinate system will be mapped correctly to configured VDS viewing coordinate system.</p>
<p>VDS supportes the following voxel orderings for RAW 3D files:</p>
<div class="table-wrapper"><table><thead><tr><th><a href="/about_volume_data.html#axes-for-spatial-coordinates">Axes for Spatial Coordinates</a></th><th>Storage order in file</th><th><a href="/about_volume_data.html#planes-for-volume-slice-orientation">Slice orientation</a> (ambiguous)</th><th>Known as</th></tr></thead><tbody>
<tr><td>LAS</td><td>R-&gt;L within P-&gt;A within I-&gt;S</td><td>&quot;Axial&quot;</td><td>Radiological</td></tr>
<tr><td>RAS</td><td>L-&gt;R within P-&gt;A within I-&gt;S</td><td>&quot;Axial&quot;</td><td>Neurological</td></tr>
<tr><td>LSA</td><td>R-&gt;L within I-&gt;S within P-&gt;A</td><td>&quot;Saggital&quot;</td><td></td></tr>
<tr><td>LIA</td><td>R-&gt;L within S-&gt;I within P-&gt;A</td><td>&quot;Coronal&quot;</td><td></td></tr>
</tbody></table>
</div>
<blockquote>
<p>If you select the wrong voxel order while importing a RAW 3D file, then you might see the volume rotated or mirrored along any of the spatial axes of the volume and not mapped correctly to the <a href="/about_volume_data.html#axes-for-spatial-coordinates">Axes for Spatial Coordinates</a>.</p>
</blockquote>
<h3 id="converting-raw-3d-file-voxel-ordering-to-an-in-memory-array"><a class="header" href="#converting-raw-3d-file-voxel-ordering-to-an-in-memory-array">Converting RAW 3D File Voxel Ordering to an In-Memory Array</a></h3>
<p>Most RAW 3D files are stored as <a href="/about_volume_data.html#axes-for-spatial-coordinates">RAS</a>:</p>
<ol>
<li><em>X increases from Left to Right</em></li>
<li><em>Y increases from Posterior to Anterior</em></li>
<li><em>Z increases from Inferior to Superior</em></li>
</ol>
<p>A naive approach to actually read an RAW 3D file into memory in one big blob and treat it as an array would probably result in a wrong access pattern like: Voxels[ X ][ Y ][ Z ].</p>
<p>Popular programming languages like C/C++/Rust use the first index as the slowest-incrementing index into memory. The correct access pattern for this example would be Voxels[ Z ][ Y ][ X ].</p>
<h2 id="alignment-to-axes-for-spatial-coordinates"><a class="header" href="#alignment-to-axes-for-spatial-coordinates">Alignment to Axes for Spatial Coordinates</a></h2>
<p>Sometimes the voxel data in RAW 3D files is not aligned to some exact orthogonal directions. Nonetheless, it's useful to know which set of axes the voxel indices correspond to most closely, as this helps when applying alignment or rotation steps.</p>
<p>Furthermore, the location of the origin is unkown. Even if we know the origin voxel, the location of the origin can be centered in the middle of this central voxel, or on the one of its eight corners.</p>
<p>VDS defaults the origin for RAW 3D files to the center of the volume 3D dimensions after the <a href="#scaling">Scaling</a> is applied.</p>
<h2 id="multiple-volumes-in-a-single-file"><a class="header" href="#multiple-volumes-in-a-single-file">Multiple volumes in a single file</a></h2>
<p>Multiple volumes in a single file could be used for multiple time points. VDS does not support multiple volumes in a single file when importing a RAW 3D file.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="importing_static_volume_data.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="visualization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="importing_static_volume_data.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="visualization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
